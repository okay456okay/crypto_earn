# å¤šäº¤æ˜“æ‰€èµ„é‡‘è´¹ç‡å¥—åˆ©äº¤æ˜“è„šæœ¬

## åŠŸèƒ½ç‰¹æ€§

ğŸš€ **å¤šäº¤æ˜“æ‰€æ”¯æŒ**: æ”¯æŒ Binanceã€Gate.ioã€Bybitã€Bitget å››å¤§ä¸»æµäº¤æ˜“æ‰€  
ğŸ“Š **è‡ªåŠ¨åŒ–å¥—åˆ©**: è‡ªåŠ¨æ£€æµ‹è´Ÿèµ„é‡‘è´¹ç‡æœºä¼šå¹¶æ‰§è¡Œå¥—åˆ©äº¤æ˜“  
âš¡ **å®æ—¶ç›‘æ§**: æ¯0.2ç§’æ£€æŸ¥è®¢å•çŠ¶æ€ï¼Œç²¾ç¡®ç»Ÿè®¡æ‰§è¡Œæ—¶é—´  
ğŸ›¡ï¸ **é£é™©æ§åˆ¶**: å†…ç½®æ­¢æŸæœºåˆ¶ï¼Œä¿æŠ¤èµ„é‡‘å®‰å…¨  
ğŸ“ˆ **æ™ºèƒ½å®šä»·**: åŸºäºèµ„é‡‘è´¹ç‡è®¡ç®—æœ€ä¼˜å¹³ä»“ä»·æ ¼  

## æ”¯æŒçš„äº¤æ˜“æ‰€

| äº¤æ˜“æ‰€ | ä»£ç åç§° | åˆçº¦ç±»å‹ | çŠ¶æ€ |
|--------|----------|----------|------|
| Binance | `binance` | æœŸè´§ (future) | âœ… å·²æ”¯æŒ |
| Gate.io | `gateio` | æ°¸ç»­åˆçº¦ (swap) | âœ… å·²æ”¯æŒ |
| Bybit | `bybit` | çº¿æ€§åˆçº¦ (linear) | âœ… å·²æ”¯æŒ |
| Bitget | `bitget` | æ°¸ç»­åˆçº¦ (swap) | âœ… å·²æ”¯æŒ |

## å®‰è£…ä¾èµ–

```bash
pip install ccxt asyncio
```

## é…ç½®APIå¯†é’¥

1. å¤åˆ¶é…ç½®ç¤ºä¾‹æ–‡ä»¶ï¼š
```bash
cp config_example.py config.py
```

2. ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œå¡«å…¥å„äº¤æ˜“æ‰€çš„APIå¯†é’¥ï¼š
```python
# Binance APIé…ç½®
binance_api_key = "your_binance_api_key_here"
binance_api_secret = "your_binance_api_secret_here"

# Gate.io APIé…ç½®  
gateio_api_key = "your_gateio_api_key_here"
gateio_api_secret = "your_gateio_api_secret_here"

# ... å…¶ä»–äº¤æ˜“æ‰€é…ç½®
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# åœ¨Binanceä¸Šäº¤æ˜“BTC/USDT
python funding_rate_trader.py BTC/USDT --exchange binance

# åœ¨Bybitä¸Šäº¤æ˜“ETH/USDT
python funding_rate_trader.py ETH/USDT --exchange bybit

# åœ¨Gate.ioä¸Šäº¤æ˜“BTC/USDT
python funding_rate_trader.py BTC/USDT --exchange gateio

# åœ¨Bitgetä¸Šäº¤æ˜“BTC/USDT
python funding_rate_trader.py BTC/USDT --exchange bitget

# è‡ªå®šä¹‰èµ„é‡‘è´¹ç‡é˜ˆå€¼ä¸º-0.3%
python funding_rate_trader.py BTC/USDT --exchange binance --min-funding-rate -0.003

# æ›´æ¿€è¿›çš„ç­–ç•¥ï¼Œèµ„é‡‘è´¹ç‡ä¸º-0.1%æ—¶å°±è§¦å‘
python funding_rate_trader.py ETH/USDT --exchange bybit --min-funding-rate -0.001
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `symbol` | å­—ç¬¦ä¸² | âœ… | - | äº¤æ˜“å¯¹ç¬¦å·ï¼Œå¦‚ BTC/USDT |
| `--exchange` | é€‰æ‹© | âŒ | binance | äº¤æ˜“æ‰€é€‰æ‹© (binance/gateio/bybit/bitget) |
| `--min-funding-rate` | æµ®ç‚¹æ•° | âŒ | -0.005 | è§¦å‘å¥—åˆ©çš„æœ€å°èµ„é‡‘è´¹ç‡é˜ˆå€¼ (-0.5%) |
| `--manual-time` | å­—ç¬¦ä¸² | âŒ | None | æ‰‹åŠ¨æŒ‡å®šæ£€æŸ¥æ—¶é—´ (ç”¨äºæµ‹è¯•) |
| `--log-level` | é€‰æ‹© | âŒ | INFO | æ—¥å¿—çº§åˆ« (DEBUG/INFO/WARNING/ERROR) |

### æµ‹è¯•æ¨¡å¼

```bash
# ä½¿ç”¨æ‰‹åŠ¨æ—¶é—´è¿›è¡Œæµ‹è¯•
python funding_rate_trader.py BTC/USDT --exchange binance --manual-time "2024-01-01T08:00:00+00:00"
```

## ç­–ç•¥é€»è¾‘

### 1. èµ„é‡‘è´¹ç‡æ£€æŸ¥
- ç›‘æ§ç›®æ ‡äº¤æ˜“å¯¹çš„èµ„é‡‘è´¹ç‡
- å½“èµ„é‡‘è´¹ç‡ä½äºè®¾å®šé˜ˆå€¼æ—¶è§¦å‘å¥—åˆ©æœºä¼šï¼ˆé»˜è®¤: < -0.5%ï¼‰
- å¯é€šè¿‡ `--min-funding-rate` å‚æ•°è‡ªå®šä¹‰é˜ˆå€¼

### 2. è‡ªåŠ¨ä¸‹å•
- åœ¨èµ„é‡‘ç»“ç®—å‰15ç§’æ£€æŸ¥æ¡ä»¶
- åœ¨èµ„é‡‘ç»“ç®—å‰5ç§’æ‰§è¡Œå¼€ä»“
- å®æ—¶ç›‘æ§è®¢å•çŠ¶æ€ç›´åˆ°æˆäº¤

### 3. æ™ºèƒ½å¹³ä»“
- è®¡ç®—æœ€ä¼˜å¹³ä»“ä»·æ ¼ï¼š`å¼€ä»“ä»·æ ¼ Ã— (1 + èµ„é‡‘è´¹ç‡ - 0.5%)`
- ä¸‹é™ä»·å¹³ä»“å•ç­‰å¾…æˆäº¤
- åŒæ—¶å¯åŠ¨æ­¢æŸç›‘æ§

### 4. é£é™©æ§åˆ¶
- ä»·æ ¼ä¸Šæ¶¨è¶…è¿‡0.1%æ—¶è‡ªåŠ¨æ­¢æŸ
- æœ€å¤§ç›‘æ§æ—¶é—´10åˆ†é’Ÿ
- è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—è®°å½•

## äº¤æ˜“æ‰€ç‰¹æ®Šè¯´æ˜

### Binance
- ä½¿ç”¨æœŸè´§åˆçº¦ (defaultType: 'future')
- æ”¯æŒåŒå‘æŒä»“æ¨¡å¼
- éœ€è¦è®¾ç½®positionSideå‚æ•°
- äº¤æ˜“å¯¹æ ¼å¼: æ ‡å‡†æ ¼å¼ (BTC/USDT)

### Bybit  
- ä½¿ç”¨çº¿æ€§åˆçº¦ (defaultType: 'linear')
- åŒå‘æŒä»“æ¨¡å¼ (positionIdx: 2)
- æ”¯æŒå…¨ä»“å’Œé€ä»“æ¨¡å¼
- äº¤æ˜“å¯¹æ ¼å¼: éœ€è¦æ·»åŠ :USDTåç¼€ (BTC/USDT:USDT)

### Gate.io
- ä½¿ç”¨æ°¸ç»­åˆçº¦ (defaultType: 'swap')
- é€šè¿‡reduceOnlyå‚æ•°æ§åˆ¶å¹³ä»“
- æ”¯æŒæ æ†åŠ¨æ€è°ƒæ•´
- äº¤æ˜“å¯¹æ ¼å¼: éœ€è¦æ·»åŠ :USDTåç¼€ (BTC/USDT:USDT)

### Bitget
- ä½¿ç”¨æ°¸ç»­åˆçº¦ (defaultType: 'swap')  
- éœ€è¦æŒ‡å®šholdSideå‚æ•°
- æ”¯æŒå…¨ä»“äº¤æ˜“æ¨¡å¼
- äº¤æ˜“å¯¹æ ¼å¼: éœ€è¦æ·»åŠ :USDTåç¼€ (BTC/USDT:USDT)
- æ—¶é—´æˆ³å¤„ç†: ä½¿ç”¨ç‰¹æ®Šçš„nextUpdateæ¯«ç§’æ—¶é—´æˆ³

## æ—¥å¿—æ–‡ä»¶

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `trade/logs/` ç›®å½•ä¸‹ï¼š
- æ–‡ä»¶åæ ¼å¼: `funding_rate_trader_YYYYMMDD.log`
- åŒ…å«è¯¦ç»†çš„äº¤æ˜“æ‰§è¡Œè®°å½•å’Œæ€§èƒ½ç»Ÿè®¡

## å®‰å…¨æé†’

âš ï¸ **é£é™©è­¦å‘Š**: å¥—åˆ©äº¤æ˜“å­˜åœ¨é£é™©ï¼Œè¯·ç¡®ä¿ï¼š

1. **APIæƒé™**: åªæˆäºˆå¿…è¦çš„äº¤æ˜“æƒé™ï¼Œé¿å…æå¸æƒé™
2. **IPç™½åå•**: å¯ç”¨APIçš„IPç™½åå•é™åˆ¶
3. **èµ„é‡‘ç®¡ç†**: åˆç†è®¾ç½®äº¤æ˜“é‡‘é¢ï¼Œæ§åˆ¶å•æ¬¡é£é™©æ•å£
4. **å®æ—¶ç›‘æ§**: å¯†åˆ‡å…³æ³¨äº¤æ˜“æ‰§è¡Œæƒ…å†µå’Œå¸‚åœºå˜åŒ–
5. **ç½‘ç»œç¨³å®š**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé¿å…æ‰§è¡Œä¸­æ–­

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIè¿æ¥å¤±è´¥**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤APIæƒé™åŒ…å«æœŸè´§/åˆçº¦äº¤æ˜“
   - éªŒè¯IPç™½åå•è®¾ç½®

2. **æ æ†è®¾ç½®å¤±è´¥**
   - æŸäº›äº¤æ˜“æ‰€éœ€è¦æ‰‹åŠ¨åœ¨ç½‘é¡µç«¯é¢„è®¾æ æ†
   - æ£€æŸ¥è´¦æˆ·ç±»å‹æ˜¯å¦æ”¯æŒæ æ†äº¤æ˜“

3. **ä¸‹å•å¤±è´¥**  
   - ç¡®è®¤è´¦æˆ·ä½™é¢å……è¶³
   - æ£€æŸ¥äº¤æ˜“å¯¹æ˜¯å¦æ­£ç¡®
   - éªŒè¯æœ€å°è®¢å•é‡‘é¢è¦æ±‚

4. **ç½‘ç»œè¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - è€ƒè™‘ä½¿ç”¨ä»£ç†æœåŠ¡å™¨
   - è°ƒæ•´è¯·æ±‚è¶…æ—¶å‚æ•°

5. **äº¤æ˜“å¯¹æ ¼å¼é”™è¯¯**
   - Binance: ä½¿ç”¨æ ‡å‡†æ ¼å¼ (BTC/USDT)
   - Bybit/Gate.io/Bitget: ä½¿ç”¨æ‰©å±•æ ¼å¼ (BTC/USDT:USDT)
   - ç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹

### è·å–å¸®åŠ©

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. APIæ–‡æ¡£ä¸­çš„å‚æ•°è¦æ±‚
3. äº¤æ˜“æ‰€çš„ç³»ç»ŸçŠ¶æ€é¡µé¢

---

**å¼€å‘ç‰ˆæœ¬**: v2.0.0  
**æ›´æ–°æ—¶é—´**: 2024å¹´  
**ä½œè€…**: åŠ å¯†è´§å¸å¥—åˆ©ä¸“å®¶