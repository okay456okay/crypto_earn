# Binance未成交订单查询工具

本项目提供了两个脚本来获取和显示Binance账户的所有未成交订单信息。

## 📁 文件说明

### 1. `get_binance_open_orders.py` - 完整版
- **功能丰富**：使用Rich库提供美观的表格显示
- **详细信息**：显示完整的订单信息和状态
- **彩色输出**：支持颜色编码和图标
- **依赖要求**：需要安装`rich`库

### 2. `simple_binance_orders.py` - 简化版
- **轻量级**：仅使用标准库和ccxt，无额外依赖
- **简洁输出**：纯文本表格格式
- **快速启动**：无需安装额外包

## 🚀 快速开始

### 前置要求

1. **配置API密钥**
   
   确保您的`config.py`文件包含以下配置：
   ```python
   # Binance API配置
   binance_api_key = "your_binance_api_key_here"
   binance_api_secret = "your_binance_api_secret_here"
   
   # 代理配置（可选）
   proxies = {
       # 'http': 'http://proxy.example.com:8080',
       # 'https': 'https://proxy.example.com:8080'
   }
   ```

2. **API权限设置**
   
   您的Binance API密钥需要具备以下权限：
   - ✅ 读取权限（Spot & Margin Trading）
   - ✅ 期货交易权限（Futures Trading）
   - ❌ 提现权限（不需要）

### 安装依赖

```bash
# 基础依赖（两个脚本都需要）
pip install ccxt

# 完整版额外依赖（仅get_binance_open_orders.py需要）
pip install rich
```

### 运行脚本

#### 方式一：完整版（推荐）
```bash
python get_binance_open_orders.py
```

#### 方式二：简化版
```bash
python simple_binance_orders.py
```

## 📊 输出示例

### 完整版输出效果
```
🚀 Binance未成交订单查询工具

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                📋 现货未成交订单 (2个)                                      │
├─────────────┬────────┬────────┬──────────────┬──────────────┬──────────┬────────┬────────────┬──────────────┤
│ 交易对      │ 方向   │ 类型   │ 数量         │ 价格         │ 总价值   │ 状态   │ 创建时间   │ 订单ID       │
├─────────────┼────────┼────────┼──────────────┼──────────────┼──────────┼────────┼────────────┼──────────────┤
│ BTC/USDT    │ BUY    │ LIMIT  │ 0.001        │ 40000.00     │ 40.00    │ open   │ 12-30 10:30│ 123456789... │
│ ETH/USDT    │ SELL   │ LIMIT  │ 0.1          │ 3500.00      │ 350.00   │ open   │ 12-30 11:15│ 987654321... │
└─────────────┴────────┴────────┴──────────────┴──────────────┴──────────┴────────┴────────────┴──────────────┘

📊 订单汇总
现货订单: 2
合约订单: 0
总计: 2

⚠️  您当前有 2 个未成交订单需要关注
```

### 简化版输出效果
```
🚀 Binance未成交订单查询工具（简化版）

【现货未成交订单】 (2个):
------------------------------------------------------------------------------------------------------------------------
交易对          方向   类型     数量            价格            总价值       创建时间     订单ID         
------------------------------------------------------------------------------------------------------------------------
BTC/USDT        BUY    LIMIT    0.001           40000           40.00        12-30 10:30  123456789...  
ETH/USDT        SELL   LIMIT    0.1             3500            350.00       12-30 11:15  987654321...  

==================================================
📊 订单汇总:
  现货订单: 2
  合约订单: 0
  总计: 2
==================================================
⚠️  您当前有 2 个未成交订单需要关注
```

## 🛠️ 功能特性

### 支持的订单类型
- ✅ 现货交易订单（Spot Trading）
- ✅ 合约交易订单（Futures Trading）
- ✅ 所有订单类型（市价单、限价单、止损单等）

### 显示信息
- 📊 交易对符号
- 📈 买卖方向（BUY/SELL）
- 🎯 订单类型（LIMIT/MARKET/STOP等）
- 💰 订单数量和价格
- 💵 订单总价值
- ⏰ 订单创建时间
- 🆔 订单ID
- 📋 订单状态

### 安全特性
- 🔒 只读API权限（不涉及交易操作）
- 🛡️ 错误处理和异常捕获
- 🔍 连接测试验证
- 📝 详细的日志记录

## ⚠️ 注意事项

1. **API安全**
   - 请勿在公共环境下暴露您的API密钥
   - 建议启用IP白名单限制
   - 定期轮换API密钥

2. **网络要求**
   - 需要稳定的网络连接访问Binance API
   - 如果在中国大陆使用，可能需要配置代理

3. **限制说明**
   - 脚本会自动处理API限制（rate limiting）
   - 大量订单可能需要较长的获取时间

## 🔧 故障排除

### 常见错误及解决方案

1. **API连接失败**
   ```
   错误: API连接测试失败
   解决: 检查网络连接和API密钥配置
   ```

2. **权限不足**
   ```
   错误: 权限不足
   解决: 确保API密钥具备现货和期货的读取权限
   ```

3. **导入错误**
   ```
   错误: 无法导入配置文件
   解决: 确保config.py文件存在且包含必要的配置项
   ```

4. **获取订单警告错误**
   ```
   错误: fetchOpenOrders() WARNING: fetching open orders without specifying a symbol...
   解决: 已在脚本中自动设置warnOnFetchOpenOrdersWithoutSymbol=False，无需手动处理
   ```

## 📞 技术支持

如果您在使用过程中遇到问题，请检查：

1. ✅ API密钥配置是否正确
2. ✅ 网络连接是否正常
3. ✅ 依赖包是否已安装
4. ✅ Python版本是否兼容（推荐3.7+）

---

**免责声明**: 本工具仅用于查询订单信息，不进行任何交易操作。使用前请确保理解相关风险。 